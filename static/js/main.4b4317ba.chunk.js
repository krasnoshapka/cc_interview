(this.webpackJsonpcc_interview=this.webpackJsonpcc_interview||[]).push([[0],{63:function(t,e,a){},73:function(t,e,a){"use strict";a.r(e);var n=a(4),r=a(3),c=a.n(r),i=a(55),s=a.n(i),u=(a(63),a(35)),o=a(31),d=a(41),l=a(21),j=c.a.createContext(null),p=function(t){var e=t.children,a=c.a.useState([]),r=Object(l.a)(a,2),i=r[0],s=r[1];return Object(n.jsx)(j.Provider,{value:{packages:i,loadPackages:function(t){s(t)}},children:e})},m=a(26),b=a.n(m),g=a(42),h=a(36),O=a(16);function v(t){for(var e="".concat(t).split("");e.length<3;)e.unshift("0");return e.push("0","0"),"LECA"+e.join("")}function f(){var t=Object(h.a)(["\n    mutation updatePackageInCart($id:ID!, $quantity: Int!) {\n      updatePackageInCart(cartItemId: $id, quantity: $quantity, personalMessage: false) {\n        items {\n          id,\n          quantity,\n          price\n        }\n      }\n    }\n  "]);return f=function(){return t},t}function x(){var t=Object(h.a)(["\n    query Cart {\n      cart {\n        id,\n        items {\n          id,\n          quantity\n          variant {\n            id,\n            sku\n          },\n          price \n        }\n      }\n    }\n  "]);return x=function(){return t},t}function k(){var t=Object(h.a)(["\n    mutation addPackageToCart($sku:SKU!, $quantity: Int!) {\n      addPackageToCart(sku: $sku, quantity: $quantity, personalMessage: false) {\n        items {\n          id,\n          quantity,\n          price\n        }\n      }\n    }\n  "]);return k=function(){return t},t}var y=Object(O.createHttpLink)({uri:"https://staging.nxte.nl:5000/graphql",credentials:"include",headers:{"x-store":"7"}}),q=new O.ApolloClient({link:y,cache:new O.InMemoryCache});function I(t){return t.map((function(t){return{packageId:parseInt(t.id),quantity:parseInt(t.quantity),amount:parseFloat(t.price)}}))}var C={packageId:0,quantity:1,amount:5},N=function(t){var e=t.formType,a=t.p,r=void 0===a?C:a,i=(Object(u.a)(t,["formType","p"]),c.a.useContext(j)),s=i.packages,p=i.loadPackages,m=c.a.useState(r),h=Object(l.a)(m,2),x=h[0],y=h[1],q=function(){var t=Object(O.useMutation)(Object(O.gql)(k())),e=Object(l.a)(t,2),a=e[0],n=e[1],r=n.data,c=n.loading,i=n.error;return{addPackageToCart:function(){var t=Object(g.a)(b.a.mark((function t(e){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a({variables:{sku:v(e.amount),quantity:e.quantity}});case 3:return n=t.sent,r=n.data.addPackageToCart.items,t.abrupt("return",I(r));case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.graphQLErrors);case 11:return t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),data:r,loading:c,error:i}}().addPackageToCart,N=function(){var t=Object(O.useMutation)(Object(O.gql)(f())),e=Object(l.a)(t,2),a=e[0],n=e[1],r=n.data,c=n.loading,i=n.error;return{updatePackageInCart:function(){var t=Object(g.a)(b.a.mark((function t(e){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a({variables:{id:"".concat(e.packageId),quantity:e.quantity}});case 3:return n=t.sent,r=n.data.updatePackageInCart.items,t.abrupt("return",I(r));case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.graphQLErrors);case 11:return t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),data:r,loading:c,error:i}}().updatePackageInCart,P=function(t){y(Object(d.a)(Object(d.a)({},x),{},Object(o.a)({},t.currentTarget.id,t.currentTarget.value)))};return Object(n.jsxs)(c.a.Fragment,{children:["add"===e&&Object(n.jsxs)("h2",{children:["Package ",s.length+1]}),Object(n.jsx)("form",{onSubmit:function(t){return function(t,a){t.preventDefault();var n={packageId:a.packageId,amount:parseInt(a.amount),quantity:parseInt(a.quantity)};"add"===e?q(n).then((function(t){p(t),y(C)})):N(n).then((function(t){p(t)}))}(t,x)},className:"package-form",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"column",children:[Object(n.jsx)("label",{htmlFor:"quantity",children:"Quantity:"}),Object(n.jsx)("input",{id:"quantity",type:"number",min:"1",max:"10",value:x.quantity,onChange:P})]}),Object(n.jsxs)("div",{className:"column",children:[Object(n.jsx)("label",{htmlFor:"amount",children:"Amount (\u20ac):"}),Object(n.jsx)("input",{id:"amount",type:"number",min:"5",max:"150",value:Math.round(x.amount),onChange:P})]}),Object(n.jsx)("div",{className:"column",children:Object(n.jsxs)("button",{children:["add"===e?"Add":"Save"," Package"]})})]})})]})},P=function(t){var e=t.p,a=t.index;Object(u.a)(t,["p","index"]);return Object(n.jsxs)("div",{className:"package-list-item",children:[Object(n.jsxs)("div",{className:"package-list-item__details row",children:[Object(n.jsxs)("div",{className:"package-list-item__title column",children:["Package ",a+1]}),Object(n.jsxs)("div",{className:"package-list-item__quantity column",children:["Quantity: ",e.quantity]}),Object(n.jsxs)("div",{className:"package-list-item__amount column",children:["Amount: \u20ac ",e.amount]})]}),Object(n.jsxs)("div",{className:"package-list-item__modify row",children:[Object(n.jsx)("input",{type:"checkbox",className:"package-list-item__input",id:"modify-".concat(a)}),Object(n.jsx)("label",{htmlFor:"modify-".concat(a),className:"package-list-item__label",children:"Modify"}),Object(n.jsx)(N,{formType:"modify",p:e})]})]})};var _=function(){var t=c.a.useContext(j).packages,e=function(){var t=c.a.useContext(j).loadPackages,e=Object(O.useQuery)(Object(O.gql)(x()),{onCompleted:function(e){t(I(e.cart.items))}});return{data:e.data,loading:e.loading,error:e.error}}(),a=e.loading;return e.error,Object(n.jsxs)("div",{className:"package-list",children:[a&&Object(n.jsx)("div",{className:"loading",children:"Loading packages..."}),t&&t.map((function(t,e){return Object(n.jsx)(P,{p:t,index:e},t.packageId)}))]})};var w=function(){return Object(n.jsx)(O.ApolloProvider,{client:q,children:Object(n.jsx)(p,{children:Object(n.jsxs)("div",{className:"package-order",children:[Object(n.jsx)(_,{}),Object(n.jsx)(N,{formType:"add"})]})})})};var T=function(){return Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)("header",{className:"header",children:Object(n.jsx)("h1",{children:"Giftcard order"})}),Object(n.jsx)(w,{})]})};s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.4b4317ba.chunk.js.map