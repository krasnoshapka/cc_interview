{"version":3,"sources":["context/packageContext.tsx","utils/api.ts","components/PackageForm.tsx","components/PackageListItem.tsx","components/PackageList.tsx","components/PackageOrder.tsx","App.tsx","index.tsx"],"names":["PackageContext","React","createContext","PackageProvider","children","useState","packages","setPackages","Provider","value","addPackage","p","packageId","length","modifyPackage","newPackages","graphQLClient","GraphQLClient","headers","convertToSKU","amount","cents","split","unshift","push","join","addPackageToCart","a","mutation","gql","variables","sku","quantity","personalMessage","rawRequest","data","errors","extensions","status","console","log","JSON","stringify","undefined","defaultPackage","PackageForm","formType","useContext","formData","setFormData","handleForm","e","currentTarget","id","handleSavePackage","preventDefault","onSubmit","htmlFor","type","min","max","onChange","PackageListItem","className","PackageList","map","PackageOrder","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fc0c3088.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport const PackageContext = React.createContext<PackageContextType | null>(null);\r\n\r\nconst PackageProvider: React.FC<React.ReactNode> = ({ children}) => {\r\n  const [packages, setPackages] = React.useState<IPackage[]>([]);\r\n\r\n  const addPackage = (p: IPackage) => {\r\n    p.packageId = packages.length;\r\n    setPackages([...packages, p]);\r\n  };\r\n\r\n  const modifyPackage = (p: IPackage) => {\r\n    const newPackages = [...packages];\r\n    newPackages[p.packageId] = p;\r\n    setPackages(newPackages);\r\n  };\r\n\r\n  return (\r\n    <PackageContext.Provider value={{ packages, addPackage, modifyPackage }}>\r\n      {children}\r\n    </PackageContext.Provider>\r\n  );\r\n}\r\n\r\nexport default PackageProvider;\r\n","import { GraphQLClient, gql } from 'graphql-request';\r\n\r\nconst endpoint = 'https://staging.nxte.nl:5000/graphql';\r\nconst customHeaders = {\"x-store\":\"7\"};\r\n\r\nconst graphQLClient = new GraphQLClient(endpoint, {\r\n  headers: customHeaders,\r\n});\r\n\r\nfunction convertToSKU(amount: number): string {\r\n  let cents = `${amount}`.split('');\r\n  while (cents.length < 3) {\r\n    cents.unshift('0');\r\n  }\r\n  cents.push('0', '0');\r\n\r\n  return 'LECA' + cents.join('');\r\n}\r\n\r\nexport async function addPackageToCart(p: IPackage): Promise<number> {\r\n  const mutation = gql`\r\n    mutation addPackageToCart($sku:SKU!, $quantity: Int!, $personalMessage: Boolean!) {\r\n      addPackageToCart(sku: $sku, quantity: $quantity, personalMessage: $personalMessage) {\r\n        id,\r\n        quantity\r\n      }\r\n    }\r\n  `;\r\n\r\n  const variables = {\r\n    sku: convertToSKU(p.amount),\r\n    quantity: p.quantity,\r\n    personalMessage: false\r\n  };\r\n  const { data, errors, extensions, headers, status } = await graphQLClient.rawRequest(mutation, variables);\r\n\r\n  console.log(JSON.stringify({ data, errors, extensions, headers, status }, undefined, 2));\r\n  return 0;\r\n}\r\n","import React from 'react';\r\nimport {PackageContext} from '../context/packageContext';\r\nimport {addPackageToCart} from \"../utils/api\";\r\n\r\nexport interface PackageFormProps extends React.ComponentPropsWithoutRef<\"form\"> {\r\n  formType: 'add' | 'modify';\r\n  p?: IPackage;\r\n}\r\n\r\nconst defaultPackage = {\r\n  packageId: 0,\r\n  quantity: 1,\r\n  amount: 5\r\n};\r\n\r\nconst PackageForm: React.FC<PackageFormProps> = ({formType, p = defaultPackage, ...props}: PackageFormProps) => {\r\n  const {packages, addPackage, modifyPackage} = React.useContext(PackageContext) as PackageContextType;\r\n  const [formData, setFormData] = React.useState<IPackage>(p);\r\n\r\n  const handleForm = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.currentTarget.id]: e.currentTarget.value\r\n    });\r\n  };\r\n\r\n  const handleSavePackage = async (e: React.FormEvent, formData: IPackage | any) => {\r\n    e.preventDefault();\r\n    // TODO: implement better form data validation here\r\n\r\n    if (formType === 'add') {\r\n      // TODO: send add request here\r\n      const packageId = await addPackageToCart(formData);\r\n\r\n      addPackage(formData);\r\n      setFormData(defaultPackage);\r\n    } else {\r\n      // TODO: send modify request here\r\n\r\n      modifyPackage(formData);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={(e) => handleSavePackage(e, formData)}>\r\n      <h3>Package {formType === 'add' ? packages.length + 1 : formData.packageId + 1}</h3>\r\n      <div>\r\n        <label htmlFor='quantity'>Quantity</label>\r\n        <input id=\"quantity\" type=\"number\" min=\"1\" max=\"10\" value={formData.quantity} onChange={handleForm} />\r\n      </div>\r\n      <div>\r\n        <label htmlFor='amount'>Amount</label>\r\n        <input id=\"amount\" type=\"number\" min=\"5\" max=\"150\" value={formData.amount} onChange={handleForm} />\r\n      </div>\r\n      <button>\r\n        {formType === 'add' ? 'Add' : 'Save'} Package\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default PackageForm;","import React from 'react';\r\nimport PackageForm from \"./PackageForm\";\r\n\r\nexport interface PackageListItemProps extends React.ComponentPropsWithoutRef<\"div\"> {\r\n  p: IPackage\r\n}\r\n\r\nexport const PackageListItem: React.FC<PackageListItemProps> = ({p, ...props}: PackageListItemProps) => {\r\n  return (\r\n    <div className='package-list-item'>\r\n      <h3>Package ({p.packageId + 1})</h3>\r\n      <div className=\"package-quantity\">Quantity: {p.quantity}</div>\r\n      <div className=\"package-amount\">Amount: {p.amount}</div>\r\n      <div>Show More...</div>\r\n      <div>\r\n        Modify\r\n        <PackageForm formType=\"modify\" p={p} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {PackageListItem} from \"./PackageListItem\";\r\nimport {PackageContext} from \"../context/packageContext\";\r\n\r\nfunction PackageList() {\r\n  const { packages, modifyPackage } = React.useContext(PackageContext) as PackageContextType;\r\n\r\n  return (\r\n    <div id=\"package-list\">\r\n      {packages && packages.map((p) =>\r\n        <PackageListItem key={p.packageId} p={p} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PackageList;\r\n","import React from 'react';\r\nimport PackageList from \"./PackageList\";\r\nimport PackageForm from \"./PackageForm\";\r\nimport PackageProvider from \"../context/packageContext\";\r\n\r\nfunction PackageOrder() {\r\n  return (\r\n    <PackageProvider>\r\n      <div id=\"package-order\">\r\n        <PackageList />\r\n        <PackageForm formType=\"add\" />\r\n      </div>\r\n    </PackageProvider>\r\n  );\r\n}\r\n\r\nexport default PackageOrder;\r\n","import React from 'react';\nimport PackageOrder from './components/PackageOrder';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        Giftcard order\n      </header>\n      <PackageOrder />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}